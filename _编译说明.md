# 中文版 AutoHotkey.chm 文档编译说明

## 操作步骤:

1. 新建一个临时文件夹,例如: `d:\tmp`

1. 把 `Doc` 和 `编译工具` 两个目录 **先后** 复制其中,有同名文件提示时,选择 **覆盖**;

1. 使用最新的 AutoHotkey **ANSI** 版本运行脚本:

	1. 运行 `1-处理htm编码和头部.ahk`
		用于处理所有htm页面的编码和头部,解决乱码问题.
		
	1. 运行 `2-编译.ahk`
		官方的编译脚本,稍加修改,适合绿色版ahk使用.
		
	1. 完成!
		在当前目录下将生成新的 AutoHotkey.chm 文件.

## 备注

### "编译工具" 目录下的文件说明

- `Index.hhk` 和 `Table of Contents.hhc` 两个文件	
	官方原版需要在官方源代码目录中运行 `compile_chm.ahk` 之后才会生成. `Chinese` 分支中的对应文件是在此基础上处理的.
- `Project.hhp` 文件
	可用微软官方CHM编译工具打开修改的, 本分支中的这个文件同样针对中文编译进行了优化.
- `编译工具\docs` 目录
	是针对中文编译优化修改过的一些静态文件.
	

### html文件的编码问题:

`compile_chm_old.ahk` 脚本是官方Doc项目自带的,
它会调用 ./doc/static/source/CreateFiles4Help.ahk
自动生成 "Table of Contents.hhc" 和 "Index.hhk", 
我们需要手动修改 "CreateFiles4Help.ahk" 避免自动生成这两个文件,
因为这两个文件我们也汉化过了...

2. 使用脚本批量修改html文件的head标签和文件编码
- Convert_CP_ok.ahk
  用于批量修改doc目录下的html文件头和文件编码.选择2即可.
- compile_chm_fonny.ahk
  用于启动编译.它将自动删除当前目录下的 "AutoHotkey.chm" 文件并生成新编译的同名文件.

3. 如果编译之后的chm文件左侧目录为乱码
用 hhw.exe 手动修改 "Project.hhp" 文件为:
```
[Options]
Language=0x804 中文(简体，中国)
```
然后重新运行脚本即可.